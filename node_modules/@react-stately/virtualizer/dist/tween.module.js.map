{"mappings":";;AAAA;;;;;;;;;;CAUC;AAID,kCAAkC;AAClC,IAAI,6BAAO,OAAO,WAAW,cAAc,OAAO,WAAW,GAAG;AAChE,aAAa;AACb,IAAI,gCAAU,8BAAS,CAAA,2BAAK,GAAG,IAAI,2BAAK,SAAS,IAAI,2BAAK,KAAK,IAAI,2BAAK,MAAM,AAAD;AAC7E,IAAI,gCAAU,gCAAU,8BAAQ,IAAI,CAAC,8BAAQ;IAC3C,OAAO,KAAK,GAAG,GAAG,KAAK,GAAG,KAAK,IAAI,OAAO,OAAO;AACnD;AAEA,IAAI;AAMG,SAAS,0CAAM,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,EAAE;IAClD,IAAI,WAAW;IACf,IAAI;IAEJ,IAAI,UAAU,IAAI,QAAQ,CAAA;QACxB,IAAI,QAAQ;QACZ,IAAI,QAAQ,IAAI,CAAC,GAAG,MAAM,CAAC;QAC3B,IAAI,QAAQ,IAAI,CAAC,GAAG,MAAM,CAAC;QAE3B,SAAS,sBAAsB,SAAS,IAAI,CAAC;YAC3C,yFAAyF;YACzF,qGAAqG;YACrG,IAAI,+BAAS,MACX,8BAAQ,IAAI,SAAS,kCAAY;YAGnC,IAAI,6BACF,IAAI;YAGN,sBAAsB;YACtB,IAAI,QAAQ,IAAI;YAChB,IAAI,QAAQ,UAAU;gBACpB,GAAG;gBACH;YACF,OAAO;gBACL,wEAAwE;gBACxE,IAAI,UAAU,GAAG,IAAI,CAAA,GAAA,yCAAI,EACvB,MAAM,CAAC,GAAG,QAAQ,KAAK,QAAQ,WAC/B,MAAM,CAAC,GAAG,QAAQ,KAAK,QAAQ;gBAGjC,IAAI,YAAY,SAAS,CAAC,UACxB,SAAS,sBAAsB;YAEnC;QACF;IACF;IAEA,QAAQ,MAAM,GAAG;QACf,WAAW;QACX,qBAAqB;IACvB;IAEA,OAAO;AACT;AAGO,SAAS,0CAAa,CAAC;IAC5B,OAAO;AACT;AAEO,SAAS,0CAAQ,CAAC;IACvB,OAAO,KAAK,GAAG,CAAC,IAAI,KAAK,EAAE,GAAG;AAChC","sources":["packages/@react-stately/virtualizer/src/tween.ts"],"sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {Point} from './Point';\n\n// use high res timer if available\nlet perf = typeof window !== 'undefined' ? window.performance : null;\n// @ts-ignore\nlet perfNow = perf && (perf.now || perf.webkitNow || perf.msNow || perf.mozNow);\nlet getTime = perfNow ? perfNow.bind(perf) : function () {\n  return Date.now ? Date.now() : new Date().getTime();\n};\n\nlet fixTs: boolean;\n\nexport interface CancelablePromise<T> extends Promise<T> {\n  cancel(): void\n}\n\nexport function tween(begin, end, duration, ease, fn): CancelablePromise<void> {\n  let canceled = false;\n  let raf_id: number;\n\n  let promise = new Promise(resolve => {\n    let start = getTime();\n    let diffX = end.x - begin.x;\n    let diffY = end.y - begin.y;\n\n    raf_id = requestAnimationFrame(function run(t) {\n      // if we're using a high res timer, make sure timestamp is not the old epoch-based value.\n      // http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision\n      if (fixTs == null) {\n        fixTs = t > 1e12 !== getTime() > 1e12;\n      }\n\n      if (fixTs) {\n        t = getTime();\n      }\n\n      // check if we're done\n      let delta = t - start;\n      if (delta > duration) {\n        fn(end);\n        resolve();\n      } else {\n        // call frame callback after computing eased time and get the next frame\n        let proceed = fn(new Point(\n          begin.x + diffX * ease(delta / duration),\n          begin.y + diffY * ease(delta / duration)\n        ));\n\n        if (proceed !== false && !canceled) {\n          raf_id = requestAnimationFrame(run);\n        }\n      }\n    });\n  }) as CancelablePromise<void>;\n\n  promise.cancel = function () {\n    canceled = true;\n    cancelAnimationFrame(raf_id);\n  };\n\n  return promise;\n}\n\n// easing functions\nexport function linearEasing(t) {\n  return t;\n}\n\nexport function easeOut(t) {\n  return Math.sin(t * Math.PI / 2);\n}\n"],"names":[],"version":3,"file":"tween.module.js.map"}